C51 COMPILER V9.54   MAIN                                                                  05/11/2023 07:52:04 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: F:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          
   4          #define MATRIX_LED_PORT P0
   5          
   6          //unsigned char pointDisplay[] = {0xFF,0xAA};
   7          
   8          //é‡æ–°å£°æ˜ç‰¹æ®Šä½P3_5
   9          sbit RCK = P3^5;        //RCLK
  10          //P3å£åœ°å€ä¸º0xB0ï¼Œ0xB0ä¸0x05è¿›è¡Œå¼‚æˆ–è¿ç®—å¾—0xB5
  11          //å› æ­¤è¯¥è¯­å¥å…¶å®å°±ç›¸å½“äº sbit RCLK = 0xB5;
  12          //æœ€åçš„æ“ä½œæ•°ä»ä¸ºç‰©ç†åœ°å€
  13          sbit SCK = P3^6;        //SRCLK ä¸Šå‡æ²¿ç§»ä½
  14          sbit SER = P3^4;        //SER   ä¸Šå‡æ²¿é”å­˜
  15          
  16          /**
  17            * @brief      74HC595å†™å…¥ä¸€ä¸ªå­—èŠ‚
  18            * @param      è¦å†™å…¥çš„å­—èŠ‚
  19            * @retval     æ— 
  20            */
  21          void _74HC595_WriteByte(unsigned char byte){
  22   1              /*
  23   1              SER = byte & 0x80;      //é0è¿›1ï¼Œå½“å³ä¾§å€¼ä¸ä¸º0æ—¶ï¼Œå°±å°†è¿™ä¸€ä½èµ‹1
  24   1              //å°†ä¼ å…¥çš„å…«ä½æ•°æ®å’Œ1000 0000ç›¸ä¸
  25   1              //å½“æœ€é«˜ä½ä¸º1æ—¶å¾—åˆ°1000 0000ï¼Œä¸º0æ—¶å¾—åˆ°0000 0000
  26   1              //è¿™æ ·å°±å¯ä»¥è·å¾—æœ€é«˜ä½çš„æ•°æ®
  27   1              SCK = 1;
  28   1              SCK = 0;        //ç§»ä½åæ¸…é›¶ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç§»ä½
  29   1              
  30   1              SER = byte & 0x40;      //è·å–ç¬¬äºŒé«˜ä½
  31   1              SCK = 1;
  32   1              SCK = 0;
  33   1              SER = byte & 0x20;
  34   1              SCK = 1;
  35   1              SCK = 0;
  36   1              SER = byte & 0x10;
  37   1              SCK = 1;
  38   1              SCK = 0;
  39   1              SER = byte & 0x08;
  40   1              SCK = 1;
  41   1              SCK = 0;
  42   1              SER = byte & 0x04;
  43   1              SCK = 1;
  44   1              SCK = 0;
  45   1              SER = byte & 0x02;
  46   1              SCK = 1;
  47   1              SCK = 0;
  48   1              SER = byte & 0x01;      //è·å–æœ€ä½ä½
  49   1              SCK = 1;
  50   1              SCK = 0;
  51   1              */
  52   1              //ä½¿ç”¨å¾ªç¯è¯­å¥ç¼–å†™ï¼Œå°†0x80ä¾æ¬¡å‘å³ç§»ä½å³å¯
  53   1              unsigned char i;
  54   1              for(i = 0;i < 8;i++){
C51 COMPILER V9.54   MAIN                                                                  05/11/2023 07:52:04 PAGE 2   

  55   2                      SER = byte & (0x80 >> i);
  56   2                      SCK = 1;
  57   2                      SCK = 0;
  58   2              }
  59   1              RCK = 1;        //é”å­˜åˆ°è¾“å‡ºç¼“å­˜
  60   1              RCK = 0;
  61   1      }
  62          
  63          /**
  64            * @brief      LEDç‚¹é˜µå±æ˜¾ç¤ºä¸€åˆ—æ•°æ®
  65            * @param      column è¦é€‰æ‹©çš„åˆ—ï¼ŒèŒƒå›´ï¼š0-7ï¼Œ0åœ¨æœ€å·¦è¾¹ï¼› 
  66            * @param      point é€‰æ‹©åˆ—æ˜¾ç¤ºçš„æ•°æ®ï¼ˆå“ªå‡ ä¸ªç‚¹ï¼‰ï¼Œé«˜ä½åœ¨ä¸Šï¼Œ1ä¸ºäº®ï¼Œ0ä¸ºç­ï¼›
  67            * @retval æ— 
  68            */
  69          void matrixLED_ShowColumn(unsigned char column,unsigned char point){
  70   1              /*è¿™é‡Œä¸éœ€å†è¿›è¡Œæšä¸¾ï¼Œä¹Ÿä¸å†è®©columnä»1å¼€å§‹
  71   1              if(column == 1){
  72   1                      P0 = 0x7F;
  73   1              }else if(column == 2){
  74   1                      P0 = 0xBF;
  75   1              }else if(column == 3){
  76   1                      P0 = 0xDF;
  77   1              }else if(column == 4){
  78   1                      P0 = 0xEF;
  79   1              }else if(column == 5){
  80   1                      P0 = 0xF7;
  81   1              }else if(column == 6){
  82   1                      P0 = 0xFB;
  83   1              }else if(column == 7){
  84   1                      P0 = 0xFD;
  85   1              }else if(column == 8){
  86   1                      P0 = 0xFE;
  87   1              }
  88   1              */
  89   1              _74HC595_WriteByte(point);      //ç›¸å½“äºæ•°ç ç®¡æ®µé€‰ï¼Œæ‰€ä»¥åé¢éœ€è¦æ¶ˆå½±æ“ä½œã€‚
  90   1              //è®¾è¦æ˜¾ç¤ºç¬¬ä¸€åˆ—æ—¶ï¼Œcolumn = 0ã€‚æ˜¾ç¤ºåé¢å‡ åˆ—æ—¶ï¼Œå°±æŒ‰åºç§»ä½å†å–åå³å¯ã€‚ç›¸å½“
             -äºæ•°ç ç®¡ä½é€‰
  91   1              MATRIX_LED_PORT = ~(0x80 >> column);
  92   1              
  93   1              //_74HC595_WriteByte(point);    //ç›¸å½“äºæ•°ç ç®¡æ®µé€‰ï¼Œæ‰€ä»¥åé¢éœ€è¦æ¶ˆå½±æ“ä½œã€‚
  94   1              setTimeout(1);
  95   1              //_74HC595_WriteByte(0x00);     //æ®µæ¸…é›¶
  96   1              MATRIX_LED_PORT = 0xFF;         //ä½æ¸…é›¶
  97   1      }
  98          
  99          void main(){
 100   1      
 101   1              int i;
 102   1              SCK = 0;
 103   1              RCK = 0;
 104   1              
 105   1              //P0 = 0x00;
 106   1              //_74HC595_WriteByte(0x0F);
 107   1              
 108   1              while(1){
 109   2                      //çˆ±å¿ƒå›¾å½¢
 110   2                      
 111   2                      matrixLED_ShowColumn(0,0x38);
 112   2                      matrixLED_ShowColumn(1,0x44);
 113   2                      matrixLED_ShowColumn(2,0x42);
 114   2                      matrixLED_ShowColumn(3,0x21);
 115   2                      matrixLED_ShowColumn(4,0x21);
C51 COMPILER V9.54   MAIN                                                                  05/11/2023 07:52:04 PAGE 3   

 116   2                      matrixLED_ShowColumn(5,0x42);
 117   2                      matrixLED_ShowColumn(6,0x44);
 118   2                      matrixLED_ShowColumn(7,0x38);
 119   2                      
 120   2                      /*
 121   2                      for(i = 0;i < 8;i++){
 122   2                              matrixLED_ShowColumn(0-i,0x38);
 123   2                              matrixLED_ShowColumn(1-i,0x44);
 124   2                              matrixLED_ShowColumn(2-i,0x42);
 125   2                              matrixLED_ShowColumn(3-i,0x21);
 126   2                              matrixLED_ShowColumn(4-i,0x21);
 127   2                              matrixLED_ShowColumn(5-i,0x42);
 128   2                              matrixLED_ShowColumn(6-i,0x44);
 129   2                              matrixLED_ShowColumn(7-i,0x38);
 130   2                              setTimeout(500);
 131   2                      }
 132   2                      */
 133   2              }
 134   1      }
*** WARNING C280 IN LINE 101 OF main.c: 'i': unreferenced local variable
 135          
 136          /*
 137          ä¸ªäººç†è§£å¯ä½å¯»å€ä¸ä¸å¯ä½å¯»å€ï¼š
 138          ä½¿ç”¨sbitå…³é”®å­—å£°æ˜å¯ä½å¯»å€ç‰¹æ®Šå¯„å­˜å™¨ä¸­çš„ç‰¹æ®Šä½æ—¶
 139          å¦‚ sbit P0_1 = 0x81; æˆ– sbit P0_1 = P0^1; å³å£°æ˜P0å¯„å­˜å™¨çš„ç¬¬1ä½
 140          ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ¹æ®è¯¥å¯ä½å¯»å€ç‰¹æ®Šå¯„å­˜å™¨çš„é¦–åœ°å€åŠ ä¸Šè¡¨ç¤ºåœ°å€å•å…ƒä¸­ç¬¬å‡ ä½çš„æ
             -•°å­—è¿›è¡Œä½å¯»å€
 141          
 142          è€Œåœ¨å•ç‰‡æœºç³»ç»Ÿä¸­ï¼Œæ“ä½œä»»æ„å¯„å­˜å™¨æˆ–è€…æŸä¸€ä½çš„æ•°æ®æ—¶ï¼Œå¿…é¡»ç»™å‡ºå…¶ç‰©ç†åœ°å€
 143          å³å°±ç®—æ˜¯å£°æ˜åçš„åœ°å€å•å…ƒï¼Œæœ€åä¹Ÿéœ€è¦è½¬åŒ–ä¸ºç‰©ç†åœ°å€ï¼ˆ0xXXï¼‰ä½œä¸ºæŒ‡ä»¤ä¸­çš„æ“
             -ä½œæ•°
 144          è¿™æ ·ç”±äºæ¯ä¸ªSFRéƒ½æœ‰å…«ä½ï¼Œå°±æ²¡æœ‰è¶³å¤Ÿçš„ç‰©ç†åœ°å€æ¥è¡¨ç¤ºæ¯ä¸ªçš„SFRä¸­çš„æ¯ä¸€ä½äº†
 145          åªèƒ½åœ¨æ¯å…«ä¸ªSFRé€‰æ‹©ä¸€ä¸ªSFRä½œä¸ºå¯ä½å¯»å€çš„SFRã€‚
 146          
 147          å¦‚ åœ°å€ä¸º0x80çš„P0å£ï¼Œå¯ä»¥ä½¿ç”¨0x80è‡³0x87ä½œä¸ºå…¶ä½å¯»å€çš„ç‰©ç†åœ°å€ï¼Œ
 148          è¡¨ç¤º0x80è¿™ä¸ªåœ°å€å•å…ƒä¸­çš„ç¬¬0ä½åˆ°ç¬¬7ä½
 149          ä½†è¿™æ ·ä¸€æ¥å°±æ— æ³•ä½¿ç”¨ç‰©ç†åœ°å€è¡¨ç¤º0x81åˆ°0x87è¿™7ä¸ªåœ°å€å•å…ƒä¸­çš„æ¯ä¸€ä½äº†
 150          æ‰€ä»¥ä¸‹ä¸€ä¸ªèƒ½å¤Ÿä½å¯»å€çš„SFRå°±ä¸ºåœ°å€å•å…ƒæ˜¯0x88çš„TCON
 151          
 152          
 153          
 154          å¯ä½å¯»å€/ä¸å¯ä½å¯»å€ï¼š
 155          åœ¨å•ç‰‡æœºç³»ç»Ÿä¸­ï¼Œæ“ä½œä»»æ„å¯„å­˜å™¨æˆ–è€…æŸä¸€ä½çš„æ•°æ®æ—¶ï¼Œå¿…é¡»ç»™å‡ºå…¶ç‰©ç†åœ°å€ï¼Œ
 156          åˆå› ä¸ºä¸€ä¸ªå¯„å­˜å™¨é‡Œæœ‰8ä½ï¼Œæ‰€ä»¥ä½çš„æ•°é‡æ˜¯å¯„å­˜å™¨æ•°é‡çš„8å€ï¼Œ
 157          å•ç‰‡æœºæ— æ³•å¯¹æ‰€æœ‰ä½è¿›è¡Œç¼–ç ï¼Œæ•…æ¯8ä¸ªå¯„å­˜å™¨ä¸­ï¼Œåªæœ‰ä¸€ä¸ªæ˜¯å¯ä»¥ä½å¯»å€çš„ã€‚
 158          å¯¹ä¸å¯ä½å¯»å€çš„å¯„å­˜å™¨ï¼Œè‹¥è¦åªæ“ä½œå…¶ä¸­ä¸€ä½è€Œä¸å½±å“å…¶å®ƒä½æ—¶ï¼Œå¯ç”¨â€œ&=â€ã€â€
             -œ|=â€ã€â€œ^=â€çš„æ–¹æ³•è¿›è¡Œä½æ“ä½œ
 159          */


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    143    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
